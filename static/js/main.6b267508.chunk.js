(this.webpackJsonptweets=this.webpackJsonptweets||[]).push([[0],{107:function(e,t,a){e.exports=a(113)},113:function(e,t,a){"use strict";a.r(t);a(108);var n=a(0),c=a.n(n),r=a(52),o=a(18),l=a(5),i=a(1),s=function(e){var t=e.data,a=Object(n.useState)([]),r=Object(l.a)(a,2),o=r[0],s=r[1],d=Object(n.useState)([]),f=Object(l.a)(d,2),g=f[0],E=f[1],v=20,h=20,w=v+20+800,p=h+70+800,x=i.f().domain(i.a(t,(function(e){return e.x}))).range([0,800]),N=i.f().domain(i.a(t,(function(e){return e.y}))).range([800,0]),S=i.c().x((function(e){return x(e.x)})).y((function(e){return N(e.y)})),y=function(e){return new Date(e.time).getTime()},b=i.g(i.b).domain(i.a(t,y));return b.ticks().length,c.a.createElement("section",{className:"section"},c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container max-width"},c.a.createElement("p",{className:"control"},c.a.createElement("input",{id:"windowSize",className:"input",type:"text",placeholder:"Window size, defult 5.",onChange:function(e){E(e.target.value)}})))),c.a.createElement("div",{className:"container max-width"},c.a.createElement("div",{className:"columns is-gapless"},c.a.createElement("div",{className:"column is-half"},c.a.createElement("div",{className:"container"},c.a.createElement("h3",{className:"title is-4"},"twi_time_coordinate_200_w8_ws20")),c.a.createElement("div",{className:"box"},c.a.createElement("svg",{viewBox:"0 0 ".concat(w," ").concat(p)},c.a.createElement("g",{transform:"translate(".concat(v,", ").concat(h,")")},c.a.createElement("g",null,c.a.createElement("path",{fill:"none",stroke:"lightgray",d:S(t)})),c.a.createElement("g",null,t.map((function(e,t){var a=new Date(e.time);return c.a.createElement("g",{key:t,transform:"translate(".concat(x(e.x),", ").concat(N(e.y),")"),onMouseEnter:function(){var t=e.time;s(t)},onMouseLeave:function(){var e=new Date;s(e)}},c.a.createElement("circle",{r:"3",opacity:"0.5",fill:"".concat(b(y(e)))},c.a.createElement("title",null,a.getFullYear(),"/",(a.getMonth()+1).toString().padStart(2,"0"),"/",a.getDate().toString().padStart(2,"0"),"-",a.getHours().toString().padStart(2,"0"))))})))),c.a.createElement("g",{transform:"translate(".concat(v,", ").concat(h+800+25,")")},b.ticks().map((function(e,t){var a=new Date(e);return c.a.createElement("g",{key:t,transform:"translate(".concat(80*t,", ",0,")")},c.a.createElement("circle",{r:"2",opacity:"0.5",fill:"".concat(b(e))}),c.a.createElement("text",{dominantBaseline:"central",fontSize:"8",x:"5"},a.getFullYear(),(a.getMonth()+1).toString().padStart(2,"0"),a.getDate().toString().padStart(2,"0")))})))))),c.a.createElement("div",{className:"column"},c.a.createElement("section",{className:"section"},0===o.length?c.a.createElement("div",{className:"container"},c.a.createElement(m,null)):c.a.createElement("div",{className:"container"},c.a.createElement(u,{timeData:o,windowSize:g})))))))},m=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){fetch("dbscan_word_coordinate.json").then((function(e){return e.json()})).then((function(e){r(e)}))}),[]);var o=50,s=10,m=800+o+50,u=800+s+20,d=function(e){return 3*Math.log(e.count)},f=i.f().domain([i.e(a,(function(e){return e.count})),i.d(a,(function(e){return e.count}))]).range([.5,1]).nice(),g=function(e){return f(e.count)},E=i.f().domain([i.e(a,(function(e){return e.x})),i.d(a,(function(e){return e.x}))]).range([0,800]).nice(),v=i.f().domain([i.d(a,(function(e){return e.y})),i.e(a,(function(e){return e.y}))]).range([0,800]).nice();return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"container"},c.a.createElement("h3",{className:"title is-4"},"All Time Word")),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"box"},c.a.createElement("svg",{viewBox:"0 0 ".concat(m," ").concat(u)},c.a.createElement("g",{transform:"translate(".concat(o,", ").concat(s,")")},a.map((function(e,t){return c.a.createElement("g",{key:t,transform:"translate(".concat(E(e.x),", ").concat(v(e.y),")")},c.a.createElement("title",null,"".concat(e.word)),c.a.createElement("circle",{r:"".concat(1.2*d(e),"px"),fill:(a=e.color,"red"===a?"lightgray":a),opacity:g(e)}),c.a.createElement("text",{fontSize:"".concat(.6*d(e),"px"),textAnchor:"middle",dominantBaseline:"central"},e.word));var a})))))))},u=function(e){var t=e.timeData,a=e.windowSize,r=Object(n.useState)([]),s=Object(l.a)(r,2),u=s[0],d=s[1];0===a.length&&(a=5);var f=new Date(t);Object(n.useEffect)((function(){var e=function(e){var t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),c="".concat(t).concat(a).concat(n),r=e.getHours().toString().padStart(2,"0");return"./dbscan_word_coordinate_by_hour/".concat(c,"/").concat(c,"_").concat(r,".json")},n=function(e){var t=new Date("2019/12/17 10:00"),a=new Date("2020/03/31 23:00");return e.getTime()>=t.getTime()&&e.getTime()<=a.getTime()?1:0},c=new Date(t),r=[];if(n(c)){r.push(e(c));for(var l=1;l<=a;++l){var i=new Date(c.getTime()+36e5*l);n(i)&&r.push(e(i));var s=new Date(c.getTime()-36e5*l);n(s)&&r.push(e(s))}}console.log(r);var m=r.map((function(e){return fetch(e).then((function(e){return e.json()}))}));console.log("reqs = "+m),Promise.all(m).then((function(e){console.log("data = "+e);var t,a={},n=Object(o.a)(e);try{for(n.s();!(t=n.n()).done;){var c,r=t.value,l=Object(o.a)(r);try{for(l.s();!(c=l.n()).done;){var i=c.value;i.word in a||(a[i.word]={word:i.word,count:0,total_count:i.total_count,color:i.color,x:i.x,y:i.y}),a[i.word].count+=i.count}}catch(s){l.e(s)}finally{l.f()}}}catch(s){n.e(s)}finally{n.f()}d(Object.values(a))}))}),[t,a]);var g=50,E=10,v=800+g+50,h=800+E+20,w=function(e){return 12*Math.log(e.count)},p=i.f().domain([i.e(u,(function(e){return e.count})),i.d(u,(function(e){return e.count}))]).range([.5,1]).nice(),x=function(e){return p(e.count)},N=i.f().domain([i.e(u,(function(e){return e.x})),i.d(u,(function(e){return e.x}))]).range([0,800]).nice(),S=i.f().domain([i.d(u,(function(e){return e.y})),i.e(u,(function(e){return e.y}))]).range([0,800]).nice();return 0===u.length?c.a.createElement("div",{className:"container"},c.a.createElement(m,null)):c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"container"},c.a.createElement("h3",{className:"title is-4"},f.getFullYear(),"/",(f.getMonth()+1).toString().padStart(2,"0"),"/",f.getDate().toString().padStart(2,"0"),"-",f.getHours().toString().padStart(2,"0")," window = ",a)),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"box"},c.a.createElement("svg",{viewBox:"0 0 ".concat(v," ").concat(h)},c.a.createElement("g",{transform:"translate(".concat(g,", ").concat(E,")")},u.map((function(e,t){return c.a.createElement("g",{key:t,transform:"translate(".concat(N(e.x),", ").concat(S(e.y),")")},c.a.createElement("title",null,"word:".concat(e.word)),c.a.createElement("circle",{r:"".concat(1.4*w(e),"px"),fill:(a=e.color,"red"===a?"lightgray":a),opacity:x(e)}),c.a.createElement("text",{fontSize:"".concat(1.6*w(e),"px"),textAnchor:"middle",dominantBaseline:"central"},e.word));var a})))))))},d=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){fetch("twi_time_coordinate_200_w8_ws20.json").then((function(e){return e.json()})).then((function(e){r(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("section",{className:"hero is-primary"},c.a.createElement("div",{className:"hero-body"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},"hello"),c.a.createElement("h2",{className:"subtitle"},"hello")))),c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container max-width"},c.a.createElement(s,{data:a}))),c.a.createElement("footer",{className:"footer"},c.a.createElement("div",{className:"content has-text-centered"},c.a.createElement("p",null,"\xa92020 xiaotiandong"))))};Object(r.render)(c.a.createElement(d,null),document.querySelector("#content"))}},[[107,1,2]]]);
//# sourceMappingURL=main.6b267508.chunk.js.map