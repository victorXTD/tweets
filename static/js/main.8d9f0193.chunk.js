(this.webpackJsonptweets=this.webpackJsonptweets||[]).push([[0],{107:function(e,t,n){e.exports=n(113)},113:function(e,t,n){"use strict";n.r(t);n(108);var a=n(0),c=n.n(a),r=n(52),o=n(18),l=n(4),i=n(1),s=function(e){var t=e.data,n=Object(a.useState)([]),r=Object(l.a)(n,2),o=r[0],s=r[1],d=Object(a.useState)([]),f=Object(l.a)(d,2),g=f[0],E=f[1],v=Object(a.useState)(!1),h=Object(l.a)(v,2),w=h[0],p=h[1],x=20,S=20,N=x+20+800,b=S+70+800,y=i.f().domain(i.a(t,(function(e){return e.x}))).range([0,800]),j=i.f().domain(i.a(t,(function(e){return e.y}))).range([800,0]),O=i.c().x((function(e){return y(e.x)})).y((function(e){return j(e.y)})),_=function(e){return new Date(e.time).getTime()},D=i.g(i.b).domain(i.a(t,_));return D.ticks().length,c.a.createElement("div",{className:"container max-width"},c.a.createElement("section",{className:"section is-fullwidth"},c.a.createElement("div",{className:"container max-width"},c.a.createElement("p",{className:"control"},c.a.createElement("input",{id:"windowSize",className:"input",type:"text",placeholder:"Window size, defult 5.",onChange:function(e){p(!1),E(e.target.value)}})))),c.a.createElement("div",{className:"container max-width"},c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column is-two-fifths"},c.a.createElement("div",{className:"container has-text-centered"},c.a.createElement("h3",{className:"title is-4"},"twi_time_coordinate_200_w8_ws20")),c.a.createElement("div",{className:"box"},c.a.createElement("svg",{viewBox:"0 0 ".concat(N," ").concat(b)},c.a.createElement("g",{transform:"translate(".concat(x,", ").concat(S,")")},c.a.createElement("g",null,c.a.createElement("path",{fill:"none",stroke:"lightgray",d:O(t)})),c.a.createElement("g",null,t.map((function(e,t){var n=new Date(e.time);return c.a.createElement("g",{key:t,transform:"translate(".concat(y(e.x),", ").concat(j(e.y),")"),onClick:function(){var t=e.time;s(t),p(!0),console.log(w)},onMouseEnter:function(){if(!1===w){console.log(w);var t=e.time;s(t)}},onMouseLeave:function(){if(!1===w){console.log(w);var e=new Date;s(e)}}},c.a.createElement("circle",{r:"3",opacity:"0.5",fill:"".concat(D(_(e)))},c.a.createElement("title",null,n.getFullYear(),"/",(n.getMonth()+1).toString().padStart(2,"0"),"/",n.getDate().toString().padStart(2,"0"),"-",n.getHours().toString().padStart(2,"0"))))})))),c.a.createElement("g",{transform:"translate(".concat(x,", ").concat(S+800+25,")")},D.ticks().map((function(e,t){var n=new Date(e);return c.a.createElement("g",{key:t,transform:"translate(".concat(90*t,", ",0,")")},c.a.createElement("circle",{r:"3",opacity:"0.5",fill:"".concat(D(e))}),c.a.createElement("text",{dominantBaseline:"central",fontSize:"12",x:"5"},n.getFullYear(),(n.getMonth()+1).toString().padStart(2,"0"),n.getDate().toString().padStart(2,"0")))})))))),c.a.createElement("div",{className:"column"},c.a.createElement("button",{className:"button is-rounded is-fullwidth",onClick:function(){p(!1);var e=new Date;s(e)}},"unlock"),c.a.createElement("div",{className:"container"},0===o.length?c.a.createElement("div",{className:"container"},c.a.createElement(m,null)):c.a.createElement("div",{className:"container"},c.a.createElement(u,{timeData:o,windowSize:g})))))))},m=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){fetch("dbscan_word_coordinate.json").then((function(e){return e.json()})).then((function(e){r(e)}))}),[]);var o=50,s=10,m=800+o+50,u=800+s+20,d=function(e){return 3*Math.log(e.count)},f=i.f().domain([i.e(n,(function(e){return e.count})),i.d(n,(function(e){return e.count}))]).range([.5,1]).nice(),g=function(e){return f(e.count)},E=i.f().domain([i.e(n,(function(e){return e.x})),i.d(n,(function(e){return e.x}))]).range([0,800]).nice(),v=i.f().domain([i.d(n,(function(e){return e.y})),i.e(n,(function(e){return e.y}))]).range([0,800]).nice();return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"container has-text-centered"},c.a.createElement("h3",{className:"title is-4"},"All Time Word")),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"box"},c.a.createElement("svg",{viewBox:"0 0 ".concat(m," ").concat(u)},c.a.createElement("g",{transform:"translate(".concat(o,", ").concat(s,")")},n.map((function(e,t){return c.a.createElement("g",{key:t,transform:"translate(".concat(E(e.x),", ").concat(v(e.y),")")},c.a.createElement("title",null,"".concat(e.word)),c.a.createElement("circle",{r:"".concat(1.2*d(e),"px"),fill:(n=e.color,"red"===n?"lightgray":n),opacity:g(e)}),c.a.createElement("text",{fontSize:"".concat(.6*d(e),"px"),textAnchor:"middle",dominantBaseline:"central"},e.word));var n})))))))},u=function(e){var t=e.timeData,n=e.windowSize,r=Object(a.useState)([]),s=Object(l.a)(r,2),u=s[0],d=s[1];0===n.length&&(n=5);var f=new Date(t);Object(a.useEffect)((function(){var e=function(e){var t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),c="".concat(t).concat(n).concat(a),r=e.getHours().toString().padStart(2,"0");return"./dbscan_word_coordinate_by_hour/".concat(c,"/").concat(c,"_").concat(r,".json")},a=function(e){var t=new Date("2019/12/17 10:00"),n=new Date("2020/03/31 23:00");return e.getTime()>=t.getTime()&&e.getTime()<=n.getTime()?1:0},c=new Date(t),r=[];if(a(c)){r.push(e(c));for(var l=1;l<=n;++l){var i=new Date(c.getTime()+36e5*l);a(i)&&r.push(e(i));var s=new Date(c.getTime()-36e5*l);a(s)&&r.push(e(s))}}console.log(r);var m=r.map((function(e){return fetch(e).then((function(e){return e.json()}))}));console.log("reqs = "+m),Promise.all(m).then((function(e){console.log("data = "+e);var t,n={},a=Object(o.a)(e);try{for(a.s();!(t=a.n()).done;){var c,r=t.value,l=Object(o.a)(r);try{for(l.s();!(c=l.n()).done;){var i=c.value;i.word in n||(n[i.word]={word:i.word,count:0,total_count:i.total_count,color:i.color,x:i.x,y:i.y}),n[i.word].count+=i.count}}catch(s){l.e(s)}finally{l.f()}}}catch(s){a.e(s)}finally{a.f()}d(Object.values(n))}))}),[t,n]);var g=50,E=10,v=800+g+50,h=800+E+20,w=function(e){return 12*Math.log(e.count)},p=i.f().domain([i.e(u,(function(e){return e.count})),i.d(u,(function(e){return e.count}))]).range([.5,1]).nice(),x=function(e){return p(e.count)},S=i.f().domain([i.e(u,(function(e){return e.x})),i.d(u,(function(e){return e.x}))]).range([0,800]).nice(),N=i.f().domain([i.d(u,(function(e){return e.y})),i.e(u,(function(e){return e.y}))]).range([0,800]).nice();return 0===u.length?c.a.createElement("div",{className:"container"},c.a.createElement(m,null)):c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"container has-text-centered"},c.a.createElement("h3",{className:"title is-4"},f.getFullYear(),"/",(f.getMonth()+1).toString().padStart(2,"0"),"/",f.getDate().toString().padStart(2,"0"),"-",f.getHours().toString().padStart(2,"0")," window = ",n)),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"box"},c.a.createElement("svg",{viewBox:"0 0 ".concat(v," ").concat(h)},c.a.createElement("g",{transform:"translate(".concat(g,", ").concat(E,")")},u.map((function(e,t){return c.a.createElement("g",{key:t,transform:"translate(".concat(S(e.x),", ").concat(N(e.y),")")},c.a.createElement("title",null,"word:".concat(e.word)),c.a.createElement("circle",{r:"".concat(1.4*w(e),"px"),fill:(n=e.color,"red"===n?"lightgray":n),opacity:x(e)}),c.a.createElement("text",{fontSize:"".concat(1.6*w(e),"px"),textAnchor:"middle",dominantBaseline:"central"},e.word));var n})))))))},d=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){fetch("twi_time_coordinate_200_w8_ws20.json").then((function(e){return e.json()})).then((function(e){r(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("section",{className:"hero is-primary"},c.a.createElement("div",{className:"hero-body"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},"hello"),c.a.createElement("h2",{className:"subtitle"},"hello")))),c.a.createElement(s,{data:n}),c.a.createElement("footer",{className:"footer"},c.a.createElement("div",{className:"content has-text-centered"},c.a.createElement("p",null,"\xa92020 xiaotiandong"))))};Object(r.render)(c.a.createElement(d,null),document.querySelector("#content"))}},[[107,1,2]]]);
//# sourceMappingURL=main.8d9f0193.chunk.js.map