(this.webpackJsonptweets=this.webpackJsonptweets||[]).push([[0],{106:function(e,t,a){e.exports=a(112)},112:function(e,t,a){"use strict";a.r(t);a(107);var n=a(0),c=a.n(n),r=a(52),o=a(18),l=a(6),i=a(1),s=function(e){var t=e.data,a=Object(n.useState)([]),r=Object(l.a)(a,2),o=r[0],s=r[1],f=20,d=20,g=f+20+800,E=d+70+800,v=i.f().domain(i.a(t,(function(e){return e.x}))).range([0,800]),h=i.f().domain(i.a(t,(function(e){return e.y}))).range([800,0]),w=i.c().x((function(e){return v(e.x)})).y((function(e){return h(e.y)})),p=function(e){return new Date(e.time).getTime()},x=i.h(i.b).domain(i.a(t,p));return 0!==x.ticks().length&&console.log(x.ticks()),c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"columns is-gapless"},c.a.createElement("div",{className:"column is-three-fifths"},c.a.createElement("div",{className:"container"},c.a.createElement("h3",{className:"title is-4"},"twi_time_coordinate_200_w8_ws20")),c.a.createElement("div",{className:"box"},c.a.createElement("svg",{viewBox:"0 0 ".concat(g," ").concat(E)},c.a.createElement("g",{transform:"translate(".concat(f,", ").concat(d,")")},c.a.createElement("g",null,c.a.createElement("path",{fill:"none",stroke:"lightgray",d:w(t)})),c.a.createElement("g",null,t.map((function(e,t){console.log("before: "+e.time);var a=new Date(e.time);return console.log("after: "+a),c.a.createElement("g",{key:t,transform:"translate(".concat(v(e.x),", ").concat(h(e.y),")"),onMouseEnter:function(){var t=e.time;console.log(t),s(t)},onMouseLeave:function(){var e=new Date;console.log(e),s(e)}},c.a.createElement("circle",{r:"3",opacity:"0.5",fill:"".concat(x(p(e)))},c.a.createElement("title",null,a.getFullYear(),"/",(a.getMonth()+1).toString().padStart(2,"0"),"/",a.getDate().toString().padStart(2,"0"),"-",a.getHours().toString().padStart(2,"0"))))})))),c.a.createElement("g",{transform:"translate(".concat(f,", ").concat(d+800+25,")")},x.ticks().map((function(e,t){var a=new Date(e);return c.a.createElement("g",{key:t,transform:"translate(".concat(80*t,", ",0,")")},c.a.createElement("circle",{r:"2",opacity:"0.5",fill:"".concat(x(e))}),c.a.createElement("text",{dominantBaseline:"central",fontSize:"8",x:"5"},a.getFullYear(),(a.getMonth()+1).toString().padStart(2,"0"),a.getDate().toString().padStart(2,"0")))})))))),c.a.createElement("div",{className:"column"},0===o.length?c.a.createElement("div",{className:"container"},c.a.createElement(m,null)):c.a.createElement("div",{className:"container"},c.a.createElement(u,{timeData:o}))))))},m=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){fetch("dbscan_word_coordinate.json").then((function(e){return e.json()})).then((function(e){console.log(e),r(e)}))}),[]);console.log(a);var o=50,s=10,m=800+o+50,u=800+s+20,f=i.g(i.i),d=function(e){return Math.pow(e.count,.7)},g=i.f().domain([i.e(a,(function(e){return e.x})),i.d(a,(function(e){return e.x}))]).range([0,800]).nice(),E=i.f().domain([i.d(a,(function(e){return e.y})),i.e(a,(function(e){return e.y}))]).range([0,800]).nice();return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"container"},c.a.createElement("h3",{className:"title is-4"},"All Time Word")),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"box"},c.a.createElement("svg",{viewBox:"0 0 ".concat(m," ").concat(u)},c.a.createElement("g",{transform:"translate(".concat(o,", ").concat(s,")")},a.map((function(e,t){return c.a.createElement("g",{key:t,transform:"translate(".concat(g(e.x),", ").concat(E(e.y),")")},c.a.createElement("title",null,"word:".concat(e.word)),c.a.createElement("circle",{r:"".concat(.8*d(e),"px"),fill:f(e.color)}),c.a.createElement("text",{fontSize:"".concat(.6*d(e),"px"),textAnchor:"middle",dominantBaseline:"central"},e.word))})))))))},u=function(e){var t=e.timeData,a=Object(n.useState)([]),r=Object(l.a)(a,2),s=r[0],u=r[1];console.log("timeData = "+t);var f=new Date(t);Object(n.useEffect)((function(){var e=function(e){var t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),c="".concat(t).concat(a).concat(n),r=e.getHours().toString().padStart(2,"0");return"./dbscan_word_coordinate_by_hour/".concat(c,"/").concat(c,"_").concat(r,".json")},a=function(e){var t=new Date("2019/12/17 10:00"),a=new Date("2020/03/31 23:00");return e.getTime()>=t.getTime()&&e.getTime()<=a.getTime()?1:0},n=new Date(t),c=[];if(a(n)){console.log("safe "+n),c.push(e(n));for(var r=1;r<=5;++r){var l=new Date(n.getTime()+36e5*r);a(l)&&c.push(e(l));var i=new Date(n.getTime()-36e5*r);a(i)&&c.push(e(i))}}console.log(c);var s=c.map((function(e){return fetch(e).then((function(e){return e.json()}))}));console.log("reqs = "+s),Promise.all(s).then((function(e){console.log("data = "+e);var t,a={},n=Object(o.a)(e);try{for(n.s();!(t=n.n()).done;){var c,r=t.value,l=Object(o.a)(r);try{for(l.s();!(c=l.n()).done;){var i=c.value;i.word in a||(a[i.word]={word:i.word,count:0,color:i.color,x:i.x,y:i.y}),a[i.word].count+=i.count}}catch(s){l.e(s)}finally{l.f()}}}catch(s){n.e(s)}finally{n.f()}console.log("words = "+a),u(Object.values(a))}))}),[t]);console.log(s);var d=50,g=10,E=800+d+50,v=800+g+20,h=i.g(i.i),w=function(e){return Math.pow(e.count,.7)},p=i.f().domain([i.e(s,(function(e){return e.x})),i.d(s,(function(e){return e.x}))]).range([0,800]).nice(),x=i.f().domain([i.d(s,(function(e){return e.y})),i.e(s,(function(e){return e.y}))]).range([0,800]).nice();return 0===s.length?c.a.createElement("div",{className:"container"},c.a.createElement(m,null)):c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"container"},c.a.createElement("h3",{className:"title is-4"},f.getFullYear(),"/",(f.getMonth()+1).toString().padStart(2,"0"),"/",f.getDate().toString().padStart(2,"0"),"-",f.getHours().toString().padStart(2,"0")," window = 5")),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"box"},c.a.createElement("svg",{viewBox:"0 0 ".concat(E," ").concat(v)},c.a.createElement("g",{transform:"translate(".concat(d,", ").concat(g,")")},s.map((function(e,t){return c.a.createElement("g",{key:t,transform:"translate(".concat(p(e.x),", ").concat(x(e.y),")")},c.a.createElement("title",null,"word:".concat(e.word)),c.a.createElement("circle",{r:"".concat(20*w(e),"px"),fill:h(e.color)}),c.a.createElement("text",{fontSize:"".concat(16*w(e),"px"),textAnchor:"middle",dominantBaseline:"central"},e.word))})))))))},f=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){fetch("twi_time_coordinate_200_w8_ws20.json").then((function(e){return e.json()})).then((function(e){console.log(e),r(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("section",{className:"hero is-primary"},c.a.createElement("div",{className:"hero-body"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},"hello"),c.a.createElement("h2",{className:"subtitle"},"hello")))),c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container"},c.a.createElement(s,{data:a}))),c.a.createElement("footer",{className:"footer"},c.a.createElement("div",{className:"content has-text-centered"},c.a.createElement("p",null,"\xa92020 xiaotiandong"))))};Object(r.render)(c.a.createElement(f,null),document.querySelector("#content"))}},[[106,1,2]]]);
//# sourceMappingURL=main.2c315365.chunk.js.map