{"version":3,"sources":["App.js","index.js"],"names":["Chart","data","useState","timeData","setTimeData","margin","width","height","xScale","d3","domain","item","x","range","yScale","y","line","getTime","Date","time","colorScale","ticks","length","console","log","className","viewBox","transform","fill","stroke","d","map","i","date","key","onMouseEnter","onMouseLeave","r","opacity","getFullYear","getMonth","toString","padStart","getDate","getHours","dominantBaseline","fontSize","AllWordPlot","allWord","setAllWord","useEffect","fetch","then","response","json","color","cicleSize","Math","pow","count","nice","word","textAnchor","WordPlot","words","setWords","cDate","jsonUrl","year","month","day","newDate","hour","chackTime","startDate","endDate","urls","push","d1","d2","requests","url","Promise","all","dateItems","Object","values","App","setData","render","document","querySelector"],"mappings":"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","file":"static/js/main.2c315365.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\n\nconst Chart = ({ data }) => {\n  const [timeData, setTimeData] = useState([]);\n  // console.log(timeData);\n\n  const contentWidth = 800;\n  const contentHeight = 800;\n  const margin = { left: 20, right: 20, top: 20, bottom: 70 };\n  const width = margin.left + margin.right + contentWidth;\n  const height = margin.top + margin.bottom + contentHeight;\n  const xScale = d3\n    .scaleLinear()\n    .domain(d3.extent(data, (item) => item.x))\n    .range([0, contentWidth]);\n  const yScale = d3\n    .scaleLinear()\n    .domain(d3.extent(data, (item) => item.y))\n    .range([contentHeight, 0]);\n  const line = d3\n    .line()\n    .x((item) => xScale(item.x))\n    .y((item) => yScale(item.y));\n  const getTime = (item) => {\n    const date = new Date(item.time);\n    return date.getTime();\n  };\n  const colorScale = d3\n    .scaleSequential(d3.interpolateCool)\n    .domain(d3.extent(data, getTime));\n\n  // console.log(colorScale.ticks());\n  if (colorScale.ticks().length !== 0) {\n    console.log(colorScale.ticks());\n  }\n\n  return (\n    <section className=\"section\">\n      <div className=\"container\">\n        <div className=\"columns is-gapless\">\n          <div className=\"column is-three-fifths\">\n            <div className=\"container\">\n              <h3 className=\"title is-4\">twi_time_coordinate_200_w8_ws20</h3>\n            </div>\n            <div className=\"box\">\n              <svg viewBox={`0 0 ${width} ${height}`}>\n                <g transform={`translate(${margin.left}, ${margin.top})`}>\n                  <g>\n                    <path fill=\"none\" stroke=\"lightgray\" d={line(data)} />\n                  </g>\n                  <g>\n                    {data.map((item, i) => {\n                      console.log(\"before: \" + item.time);\n                      const date = new Date(item.time);\n                      console.log(\"after: \" + date);\n                      // console.log(item.time);\n\n                      return (\n                        <g\n                          key={i}\n                          transform={`translate(${xScale(item.x)}, ${yScale(\n                            item.y\n                          )})`}\n                          onMouseEnter={() => {\n                            var timeData = item.time;\n                            console.log(timeData);\n                            setTimeData(timeData);\n                          }}\n                          onMouseLeave={() => {\n                            var timeData = new Date();\n                            console.log(timeData);\n                            setTimeData(timeData);\n                          }}\n                        >\n                          <circle\n                            r=\"3\"\n                            opacity=\"0.5\"\n                            fill={`${colorScale(getTime(item))}`}\n                          >\n                            <title>\n                              {date.getFullYear()}/\n                              {(date.getMonth() + 1)\n                                .toString()\n                                .padStart(2, \"0\")}\n                              /{date.getDate().toString().padStart(2, \"0\")}-\n                              {date.getHours().toString().padStart(2, \"0\")}\n                            </title>\n                          </circle>\n                        </g>\n                      );\n                    })}\n                  </g>\n                </g>\n                <g\n                  transform={`translate(${margin.left}, ${\n                    margin.top + contentHeight + 25\n                  })`}\n                >\n                  {colorScale.ticks().map((item, i) => {\n                    const date = new Date(item);\n                    return (\n                      <g key={i} transform={`translate(${80 * i}, ${0})`}>\n                        <circle\n                          r=\"2\"\n                          opacity=\"0.5\"\n                          fill={`${colorScale(item)}`}\n                        ></circle>\n                        <text dominantBaseline=\"central\" fontSize=\"8\" x=\"5\">\n                          {date.getFullYear()}\n                          {(date.getMonth() + 1).toString().padStart(2, \"0\")}\n                          {date.getDate().toString().padStart(2, \"0\")}\n                        </text>\n                      </g>\n                    );\n                  })}\n                </g>\n              </svg>\n            </div>\n          </div>\n          <div className=\"column\">\n            {/* <section className=\"section\"> */}\n            {/* <div className=\"container\"> */}\n            {/* <div className=\"column\"> */}\n            {timeData.length === 0 ? (\n              <div className=\"container\">\n                <AllWordPlot />\n              </div>\n            ) : (\n              <div className=\"container\">\n                <WordPlot timeData={timeData} />\n              </div>\n            )}\n            {/* </div> */}\n            {/* </div> */}\n            {/* </section> */}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nconst AllWordPlot = () => {\n  const [allWord, setAllWord] = useState([]);\n  useEffect(() => {\n    fetch(\"dbscan_word_coordinate.json\")\n      // fetch(\"test.json\")\n      .then((response) => response.json())\n      // .then((text) => console.log(text));\n      .then((allWord) => {\n        console.log(allWord);\n        setAllWord(allWord);\n      });\n  }, []);\n\n  const contentWidth = 800;\n  const contentHeight = 800;\n\n  console.log(allWord);\n\n  const margin = {\n    left: 50,\n    right: 50,\n    top: 10,\n    bottom: 20,\n  };\n\n  const width = contentWidth + margin.left + margin.right;\n  const height = contentHeight + margin.top + margin.bottom;\n\n  const color = d3.scaleOrdinal(d3.schemeAccent);\n  const cicleSize = (d) => Math.pow(d.count, 0.7);\n\n  const xScale = d3\n    .scaleLinear()\n    .domain([\n      d3.min(allWord, (item) => item.x),\n      d3.max(allWord, (item) => item.x),\n    ])\n    .range([0, contentWidth])\n    .nice();\n\n  const yScale = d3\n    .scaleLinear()\n    .domain([\n      d3.max(allWord, (item) => item.y),\n      d3.min(allWord, (item) => item.y),\n    ])\n    .range([0, contentHeight])\n    .nice();\n\n  return (\n    <div className=\"container\">\n      <div className=\"container\">\n        <h3 className=\"title is-4\">All Time Word</h3>\n      </div>\n      <div className=\"container\">\n        <div className=\"box\">\n          <svg viewBox={`0 0 ${width} ${height}`}>\n            <g transform={`translate(${margin.left}, ${margin.top})`}>\n              {allWord.map((item, i) => {\n                return (\n                  <g\n                    key={i}\n                    transform={`translate(${xScale(item.x)}, ${yScale(\n                      item.y\n                    )})`}\n                    // style={{ cursor: \"pointer\" }}\n                  >\n                    <title>{`word:${item.word}`}</title>\n                    <circle\n                      r={`${cicleSize(item) * 0.8}px`}\n                      fill={color(item.color)}\n                    />\n                    <text\n                      fontSize={`${cicleSize(item) * 0.6}px`}\n                      textAnchor=\"middle\"\n                      dominantBaseline=\"central\"\n                    >\n                      {item.word}\n                    </text>\n                  </g>\n                );\n              })}\n            </g>\n          </svg>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst App = () => {\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    fetch(\"twi_time_coordinate_200_w8_ws20.json\")\n      // fetch(\"test.json\")\n      .then((response) => response.json())\n      // .then((text) => console.log(text));\n      .then((data) => {\n        console.log(data);\n        setData(data);\n      });\n  }, []);\n\n  return (\n    <div>\n      <section className=\"hero is-primary\">\n        <div className=\"hero-body\">\n          <div className=\"container\">\n            <h1 className=\"title\">hello</h1>\n            <h2 className=\"subtitle\">hello</h2>\n          </div>\n        </div>\n      </section>\n      <section className=\"section\">\n        <div className=\"container\">\n          <Chart data={data} />\n        </div>\n      </section>\n      <footer className=\"footer\">\n        <div className=\"content has-text-centered\">\n          <p>&copy;2020 xiaotiandong</p>\n        </div>\n      </footer>\n    </div>\n  );\n};\n\n//////////////////////////\nconst WordPlot = ({ timeData }) => {\n  const [words, setWords] = useState([]);\n\n  console.log(\"timeData = \" + timeData);\n\n  const cDate = new Date(timeData);\n\n  // useEffect(() => {\n  //   fetch(timeData)\n  //     .then((response) => response.json())\n  //     .then((data) => {\n  //       setData(data);\n  //     });\n  // }, [timeData]);\n\n  useEffect(() => {\n    const jsonUrl = (date) => {\n      var year = date.getFullYear();\n      var month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n      var day = date.getDate().toString().padStart(2, \"0\");\n\n      var newDate = `${year}${month}${day}`;\n      var hour = date.getHours().toString().padStart(2, \"0\");\n      var path = `./dbscan_word_coordinate_by_hour/${newDate}/${newDate}_${hour}.json`;\n      return path;\n    };\n\n    const chackTime = (date) => {\n      var startDate = new Date(\"2019/12/17 10:00\");\n      var endDate = new Date(\"2020/03/31 23:00\");\n\n      if (\n        date.getTime() >= startDate.getTime() &&\n        date.getTime() <= endDate.getTime()\n      ) {\n        return 1;\n      } else return 0;\n    };\n\n    const date = new Date(timeData);\n    const windowSize = 5;\n    const urls = [];\n    if (chackTime(date)) {\n      console.log(\"safe \" + date);\n      urls.push(jsonUrl(date));\n      for (let i = 1; i <= windowSize; ++i) {\n        const d1 = new Date(date.getTime() + 3600000 * i);\n        if (chackTime(d1)) {\n          urls.push(jsonUrl(d1));\n        }\n        const d2 = new Date(date.getTime() - 3600000 * i);\n        if (chackTime(d2)) {\n          urls.push(jsonUrl(d2));\n        }\n      }\n    }\n\n    console.log(urls);\n\n    const requests = urls.map((url) => {\n      return fetch(url).then((response) => response.json());\n    });\n\n    console.log(\"reqs = \" + requests);\n\n    Promise.all(requests).then((data) => {\n      console.log(\"data = \" + data);\n      const words = {};\n      for (const dateItems of data) {\n        for (const item of dateItems) {\n          // console.log(\"item.word = \" + item.word);\n          if (!(item.word in words)) {\n            words[item.word] = {\n              word: item.word,\n              count: 0,\n              color: item.color,\n              x: item.x,\n              y: item.y,\n            };\n          }\n          words[item.word].count += item.count;\n        }\n      }\n      console.log(\"words = \" + words);\n      setWords(Object.values(words));\n    });\n  }, [timeData]);\n\n  const contentWidth = 800;\n  const contentHeight = 800;\n\n  console.log(words);\n\n  const margin = {\n    left: 50,\n    right: 50,\n    top: 10,\n    bottom: 20,\n  };\n\n  const width = contentWidth + margin.left + margin.right;\n  const height = contentHeight + margin.top + margin.bottom;\n\n  const color = d3.scaleOrdinal(d3.schemeAccent);\n  const cicleSize = (d) => Math.pow(d.count, 0.7);\n\n  const xScale = d3\n    .scaleLinear()\n    .domain([d3.min(words, (item) => item.x), d3.max(words, (item) => item.x)])\n    .range([0, contentWidth])\n    .nice();\n\n  const yScale = d3\n    .scaleLinear()\n    .domain([d3.max(words, (item) => item.y), d3.min(words, (item) => item.y)])\n    .range([0, contentHeight])\n    .nice();\n\n  return words.length === 0 ? (\n    <div className=\"container\">\n      <AllWordPlot />\n    </div>\n  ) : (\n    <div className=\"container\">\n      <div className=\"container\">\n        <h3 className=\"title is-4\">\n          {cDate.getFullYear()}/\n          {(cDate.getMonth() + 1).toString().padStart(2, \"0\")}/\n          {cDate.getDate().toString().padStart(2, \"0\")}-\n          {cDate.getHours().toString().padStart(2, \"0\")} window = 5\n        </h3>\n      </div>\n      <div className=\"container\">\n        <div className=\"box\">\n          <svg viewBox={`0 0 ${width} ${height}`}>\n            <g transform={`translate(${margin.left}, ${margin.top})`}>\n              {words.map((item, i) => {\n                return (\n                  <g\n                    key={i}\n                    transform={`translate(${xScale(item.x)}, ${yScale(\n                      item.y\n                    )})`}\n                    // style={{ cursor: \"pointer\" }}\n                  >\n                    <title>{`word:${item.word}`}</title>\n                    <circle\n                      r={`${cicleSize(item) * 20}px`}\n                      fill={color(item.color)}\n                    />\n                    <text\n                      fontSize={`${cicleSize(item) * 16}px`}\n                      textAnchor=\"middle\"\n                      dominantBaseline=\"central\"\n                    >\n                      {item.word}\n                    </text>\n                  </g>\n                );\n              })}\n            </g>\n          </svg>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import \"bulma/css/bulma.css\";\nimport React from \"react\";\nimport { render } from \"react-dom\";\nimport App from \"./App\";\n\nrender(<App />, document.querySelector(\"#content\"));\n"],"sourceRoot":""}